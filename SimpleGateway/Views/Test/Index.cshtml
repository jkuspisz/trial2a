@model SimpleGateway.Models.TestDataModel
@{
    ViewData["Title"] = "Test Data Entry";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h2>Test Data Entry - PostgreSQL Save Test</h2>
            <p class="text-muted">This is a test page to verify data saves to PostgreSQL database.</p>
            <p class="text-info"><strong>Current User:</strong> @ViewBag.CurrentUser</p>
            
            @if (!string.IsNullOrEmpty(TempData["SuccessMessage"] as string))
            {
                <div class="alert alert-success">
                    @TempData["SuccessMessage"]
                    @if (TempData["TotalRecords"] != null)
                    {
                        <br><strong>Total records in database:</strong> @TempData["TotalRecords"]
                    }
                </div>
            }
            
            @if (!string.IsNullOrEmpty(TempData["ErrorMessage"] as string))
            {
                <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
            }
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4>Test Questions</h4>
                    <p class="mb-0 text-muted">Please answer both questions to test the PostgreSQL save functionality.</p>
                </div>
                <div class="card-body">
                    <form asp-action="Index" method="post">
                        <input type="hidden" asp-for="Username" />
                        
                        <!-- Question 1 -->
                        <div class="mb-4">
                            <label asp-for="UKWorkExperience" class="form-label">
                                <strong>Question 1:</strong> @Html.DisplayNameFor(m => m.UKWorkExperience)
                            </label>
                            <textarea asp-for="UKWorkExperience" class="form-control" rows="3" 
                                     placeholder="Please describe your work experience in the UK, if any. For example: '5 years as a dentist in London' or 'No UK work experience yet'"></textarea>
                            <span asp-validation-for="UKWorkExperience" class="text-danger"></span>
                        </div>
                        
                        <!-- Question 2 -->
                        <div class="mb-4">
                            <label asp-for="LastPatientTreatment" class="form-label">
                                <strong>Question 2:</strong> @Html.DisplayNameFor(m => m.LastPatientTreatment)
                            </label>
                            <textarea asp-for="LastPatientTreatment" class="form-control" rows="3" 
                                     placeholder="Please describe when you last treated a patient. For example: 'Yesterday - routine cleaning' or 'Last month - filling procedure'"></textarea>
                            <span asp-validation-for="LastPatientTreatment" class="text-danger"></span>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="mb-3">
                            <button type="submit" class="btn btn-primary btn-lg">Save Test Data to PostgreSQL</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test Information</h5>
                </div>
                <div class="card-body">
                    <p><strong>Purpose:</strong> This page tests if data can be successfully saved to the PostgreSQL database.</p>
                    <p><strong>Database:</strong> Railway PostgreSQL</p>
                    <p><strong>Table:</strong> TestData</p>
                    <p><strong>Pattern:</strong> Following the same successful pattern as PerformerDetails</p>
                    
                    <hr>
                    
                    <h6>Navigation:</h6>
                    <ul class="list-unstyled">
                        <li><a href="/Test" class="btn btn-sm btn-outline-primary mb-2">Test Form</a></li>
                        <li><a href="/Test/ViewAll" class="btn btn-sm btn-outline-secondary mb-2">View All Records</a></li>
                        <li><a href="/Dashboard" class="btn btn-sm btn-outline-info mb-2">Back to Dashboard</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
