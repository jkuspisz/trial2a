@model SimpleGateway.Models.TestDataModel2
@{
    ViewData["Title"] = "Test Practice 2 - Comprehensive Assessment";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h2>Test Practice 2 - Simple Text-Based Assessment - @ViewBag.PerformerName</h2>
            @if (!string.IsNullOrEmpty(TempData["SuccessMessage"] as string))
            {
                <div class="alert alert-success">
                    @TempData["SuccessMessage"]
                    @if (TempData["TotalRecords"] != null)
                    {
                        <br><strong>Total records in PostgreSQL database:</strong> @TempData["TotalRecords"]
                    }
                </div>
            }
            
            @if (!string.IsNullOrEmpty(TempData["ErrorMessage"] as string))
            {
                <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
            }
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            <ul class="list-group">
                <li class="list-group-item @(ViewBag.ActiveSection == "Dashboard" ? "active" : "")">
                    <a href="/Dashboard/Index" style="@(ViewBag.ActiveSection == "Dashboard" ? "color: white;" : "")">
                        <i class="bi bi-speedometer2"></i> Dashboard Overview
                    </a>
                </li>
                <li class="list-group-item @(ViewBag.ActiveSection == "PerformerDetails" ? "active" : "")">
                    <a href="/Dashboard/PerformerDetails?performerUsername=@ViewBag.PerformerUsername" style="@(ViewBag.ActiveSection == "PerformerDetails" ? "color: white;" : "")">Performer Details</a>
                </li>
                <li class="list-group-item @(ViewBag.ActiveSection == "TestPractice" ? "active" : "")">
                    <a href="/Dashboard/TestPractice?performerUsername=@ViewBag.PerformerUsername" style="@(ViewBag.ActiveSection == "TestPractice" ? "color: white;" : "")">Test Practice</a>
                </li>
                <li class="list-group-item @(ViewBag.ActiveSection == "TestPractice2" ? "active" : "")">
                    <a href="/Dashboard/TestPractice2?performerUsername=@ViewBag.PerformerUsername" style="@(ViewBag.ActiveSection == "TestPractice2" ? "color: white;" : "")">Test Practice 2</a>
                </li>
                <li class="list-group-item @(ViewBag.ActiveSection == "Uploads" ? "active" : "")">
                    <a href="/Dashboard/Uploads?performerUsername=@ViewBag.PerformerUsername" style="@(ViewBag.ActiveSection == "Uploads" ? "color: white;" : "")">Uploads</a>
                </li>
            </ul>
        </div>
        
        <div class="col-9">
            <div class="card">
                <div class="card-header">
                    <h5>Comprehensive Professional Assessment</h5>
                    <p class="text-muted">Please provide detailed responses in the text areas below. This simplified format allows you to express your experience naturally.</p>
                </div>
                <div class="card-body">
                    <form asp-action="TestPractice2" method="post">
                        @Html.HiddenFor(m => m.Id)
                        @Html.HiddenFor(m => m.Username)
                        @Html.HiddenFor(m => m.CreatedDate)
                        
                        <!-- Basic required fields -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label asp-for="UKWorkExperience" class="form-label"></label>
                                <textarea asp-for="UKWorkExperience" class="form-control" rows="3" placeholder="Describe your UK work experience..."></textarea>
                                <span asp-validation-for="UKWorkExperience" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="LastPatientTreatment" class="form-label"></label>
                                <textarea asp-for="LastPatientTreatment" class="form-control" rows="3" placeholder="Describe when you last treated a patient..."></textarea>
                                <span asp-validation-for="LastPatientTreatment" class="text-danger"></span>
                            </div>
                        </div>

                        <!-- Registration and Qualifications -->
                        <div class="mb-4">
                            <h6>Registration and Qualifications</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <label asp-for="GDCRegistrationNumber" class="form-label"></label>
                                    <input asp-for="GDCRegistrationNumber" class="form-control" placeholder="Your GDC number...">
                                </div>
                                <div class="col-md-6">
                                    <label asp-for="UKRegistrationDate" class="form-label"></label>
                                    <input asp-for="UKRegistrationDate" class="form-control" placeholder="Date of registration...">
                                </div>
                            </div>
                            <div class="mt-2">
                                <label asp-for="PrimaryQualification" class="form-label">Primary Qualification Details</label>
                                <textarea asp-for="PrimaryQualification" class="form-control" rows="3" placeholder="Describe your primary dental qualification, institution, country, and year..."></textarea>
                            </div>
                        </div>

                        <!-- NHS Experience -->
                        <div class="mb-4">
                            <h6>NHS Experience</h6>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input asp-for="NHSWorkFullTime" type="checkbox" class="form-check-input">
                                        <label asp-for="NHSWorkFullTime" class="form-check-label"></label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input asp-for="NHSWorkPartTime" type="checkbox" class="form-check-input">
                                        <label asp-for="NHSWorkPartTime" class="form-check-label"></label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label asp-for="NHSWorkDaysPerWeek" class="form-label"></label>
                                    <input asp-for="NHSWorkDaysPerWeek" type="number" class="form-control" min="1" max="7">
                                </div>
                            </div>
                        </div>

                        <!-- Simplified comprehensive text areas -->
                        <div class="mb-4">
                            <label asp-for="ClinicalExperienceText" class="form-label"></label>
                            <textarea asp-for="ClinicalExperienceText" class="form-control" rows="6" 
                                placeholder="Describe your clinical experience including:
- Types of procedures performed and approximate counts
- Complexity of cases handled
- Recent clinical work
- Areas of particular expertise

Example: I have performed approximately 500 simple extractions, 50 root divisions, 200 clinical assessments..."></textarea>
                        </div>

                        <div class="mb-4">
                            <label asp-for="ConfidenceLevelsText" class="form-label"></label>
                            <textarea asp-for="ConfidenceLevelsText" class="form-control" rows="6" 
                                placeholder="Rate your confidence levels (1-6 scale) for different procedures:
- Simple extractions: [rating] - [comments]
- Root divisions: [rating] - [comments]  
- Clinical assessments: [rating] - [comments]
- BPE examinations: [rating] - [comments]
- Radiographs: [rating] - [comments]
- Other procedures: [rating] - [comments]

Please explain your confidence levels and any relevant experience."></textarea>
                        </div>

                        <div class="mb-4">
                            <label asp-for="LastProcedureDatesText" class="form-label"></label>
                            <textarea asp-for="LastProcedureDatesText" class="form-control" rows="5" 
                                placeholder="When did you last perform various procedures?
- Simple extractions: [date/timeframe]
- Root divisions: [date/timeframe]
- Clinical assessments: [date/timeframe]
- BPE examinations: [date/timeframe]
- Other key procedures: [date/timeframe]

Please provide approximate dates or timeframes."></textarea>
                        </div>

                        <div class="mb-4">
                            <label asp-for="TrainingNeedsText" class="form-label"></label>
                            <textarea asp-for="TrainingNeedsText" class="form-control" rows="6" 
                                placeholder="Describe your training needs and development priorities:
- Procedures you need training in
- Areas where you'd like to improve
- Specific skills you want to develop
- Any particular concerns or challenges

Please be specific about what training would be most beneficial for you."></textarea>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary">Save Assessment</button>
                                <a href="/Dashboard/Index" class="btn btn-secondary ms-2">Cancel</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
