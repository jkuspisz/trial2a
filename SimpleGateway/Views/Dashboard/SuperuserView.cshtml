@{
    ViewBag.Title = "Superuser Dashboard";
}

@{
    Layout = "_Layout";
}

<div class="row">
    <div class="col-3">
        <ul class="list-group">
            <li class="list-group-item active"><a href="#" style="color: white;">System Overview</a></li>
            <li class="list-group-item"><a href="#">All Users</a></li>
            <li class="list-group-item"><a href="#">All Performers</a></li>
            <li class="list-group-item"><a href="#">System Settings</a></li>
            <li class="list-group-item"><a href="#">Permissions</a></li>
            <li class="list-group-item"><a href="#">Audit Logs</a></li>
            <li class="list-group-item"><a href="/Account/Logout">Logout</a></li>
        </ul>
    </div>
    <div class="col-9">
        <h2>Superuser Dashboard</h2>
        <p>Logged in as: <b>@ViewBag.DisplayName</b> (Role: @ViewBag.Role)</p>
        <p><small class="text-muted">System Overview: 7 Total Users | 3 Performers | 2 Staff | 2 Admins</small></p>
        <hr />
        
        <div class="card mb-3">
            <div class="card-header">
                <h4 class="mb-0">Complete System Access</h4>
                <small class="text-muted">You have full access to all system functions</small>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>User Management</h6>
                        <button class="btn btn-success btn-sm me-2">Add Any User Type</button>
                        <button class="btn btn-warning btn-sm me-2">Modify Users</button>
                        <button class="btn btn-danger btn-sm">Remove Users</button>
                    </div>
                    <div class="col-md-6">
                        <h6>System Functions</h6>
                        <button class="btn btn-info btn-sm me-2">System Settings</button>
                        <button class="btn btn-secondary btn-sm me-2">Permissions</button>
                        <button class="btn btn-primary btn-sm">Site Configuration</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="mb-0">All System Users</h4>
                <div class="d-flex gap-2">
                    <input type="text" id="superuserSearch" class="form-control form-control-sm" style="width: 300px;" placeholder="Search users by name, username, or role...">
                    <select id="superuserRoleFilter" class="form-select form-select-sm" style="width: 150px;">
                        <option value="">All Roles</option>
                        <option value="performer">Performers</option>
                        <option value="supervisor">Supervisors</option>
                        <option value="advisor">Advisors</option>
                        <option value="admin">Admins</option>
                        <option value="superuser">Superusers</option>
                    </select>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table id="superuserTable" class="table table-striped">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Last Login</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><a href="/Dashboard/ViewPerformer?performerUsername=performer1" class="text-primary fw-bold">John Smith</a></td>
                                <td><span class="badge bg-primary">Performer</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>2 hours ago</td>
                                <td>
                                    <a href="/Dashboard/ViewPerformer?performerUsername=performer1" class="btn btn-sm btn-primary">View Dashboard</a>
                                    <button class="btn btn-sm btn-warning">Edit</button>
                                    <button class="btn btn-sm btn-danger">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td><a href="/Dashboard/ViewPerformer?performerUsername=performer2" class="text-primary fw-bold">Sarah Johnson</a></td>
                                <td><span class="badge bg-primary">Performer</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>1 day ago</td>
                                <td>
                                    <a href="/Dashboard/ViewPerformer?performerUsername=performer2" class="btn btn-sm btn-primary">View Dashboard</a>
                                    <button class="btn btn-sm btn-warning">Edit</button>
                                    <button class="btn btn-sm btn-danger">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td><a href="/Dashboard/ViewPerformer?performerUsername=performer3" class="text-primary fw-bold">Mike Wilson</a></td>
                                <td><span class="badge bg-primary">Performer</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>30 minutes ago</td>
                                <td>
                                    <a href="/Dashboard/ViewPerformer?performerUsername=performer3" class="btn btn-sm btn-primary">View Dashboard</a>
                                    <button class="btn btn-sm btn-warning">Edit</button>
                                    <button class="btn btn-sm btn-danger">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Dr. Emma Thompson</td>
                                <td><span class="badge bg-info">Supervisor</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>4 hours ago</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">View Dashboard</button>
                                    <button class="btn btn-sm btn-warning">Edit</button>
                                    <button class="btn btn-sm btn-danger">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Mr. David Brown</td>
                                <td><span class="badge bg-warning">Advisor</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>6 hours ago</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">View Dashboard</button>
                                    <button class="btn btn-sm btn-warning">Edit</button>
                                    <button class="btn btn-sm btn-danger">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Administrator</td>
                                <td><span class="badge bg-danger">Admin</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>3 hours ago</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">View Dashboard</button>
                                    <button class="btn btn-sm btn-warning">Edit</button>
                                    <button class="btn btn-sm btn-danger">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>System Administrator</td>
                                <td><span class="badge bg-dark">Superuser</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>Now</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">View Dashboard</button>
                                    <button class="btn btn-sm btn-warning">Edit</button>
                                    <button class="btn btn-sm btn-secondary">Cannot Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="mt-3">
            <div class="alert alert-danger">
                <strong>Superuser Access:</strong> You have complete system control. Use these permissions responsibly.
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('superuserSearch');
    const roleFilter = document.getElementById('superuserRoleFilter');
    const table = document.getElementById('superuserTable');
    const tbody = table.querySelector('tbody');

    function filterTable() {
        const searchTerm = searchInput.value.toLowerCase();
        const selectedRole = roleFilter.value.toLowerCase();
        const rows = tbody.querySelectorAll('tr');

        rows.forEach(row => {
            const userCell = row.cells[0].textContent.toLowerCase();
            const roleCell = row.cells[1].textContent.toLowerCase();
            
            const matchesSearch = userCell.includes(searchTerm) || 
                                row.cells[0].querySelector('a')?.getAttribute('href')?.toLowerCase().includes(searchTerm);
            const matchesRole = selectedRole === '' || roleCell.includes(selectedRole);

            if (matchesSearch && matchesRole) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    }

    searchInput.addEventListener('input', filterTable);
    roleFilter.addEventListener('change', filterTable);
});
</script>
